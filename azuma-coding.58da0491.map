{"version":3,"sources":["../node_modules/hyperapp/src/index.js","../node_modules/@hyperapp/transitions/src/index.js","0","asset/mylib.js","asset/azuma-coding.js"],"names":["h","name","attributes","length","rest","children","arguments","push","node","pop","nodeName","key","app","state","actions","view","container","map","skipRender","rootElement","oldNode","recycleElement","element","toLowerCase","call","childNodes","nodeType","nodeValue","lifecycle","isRecycling","globalState","clone","wiredActions","wireStateToActions","path","action","data","result","getPartialState","then","scheduleRender","setPartialState","concat","resolveNode","render","patch","parent","isSvg","newElement","createElement","document","createTextNode","createElementNS","oncreate","i","appendChild","updateAttribute","insertBefore","removeElement","updateElement","oldAttributes","cb","onupdate","oldKeyed","newKeyed","oldElements","oldChildren","oldKey","getKey","k","newKey","keyedNode","setTimeout","target","source","out","value","slice","eventListener","event","currentTarget","events","type","oldValue","style","cssText","setProperty","addEventListener","removeEventListener","setAttribute","removeAttribute","done","removeChild","removeChildren","ondestroy","onremove","updateAllTracked","trackingRegistry","el","parentNode","setStyle","attr","Object","keys","forEach","registerTracking","indexOf","updateTracking","unregisterTracking","splice","invertLastMove","x","_x","y","_y","n","Math","floor","rect","getBoundingClientRect","left","top","runTransition","before","after","ondone","easing","time","delay","requestAnimationFrame","transition","runEnter","css","reduce","o","runMove","transform","runExit","translation","noop","composeHandlers","f1","f2","transitionComponent","handlersFn","handlers","filter","child","_track","_move","_exit","keep","Enter","Move","Exit","module","exports","cells","title","enTitle","imgIndex","typeDetail","vimeoId","url","addr","CellConfig","cellSize","viewHeight","window","innerHeight","aspect","innerWidth","directions","odd","even","randomIn","min","max","random","rangeIn","Array","calcNextPos","positionArray","basePosition","directionType","randomDirection","movement","getNextPos","nextPos","verifyPos","configurePosition","currentCells","newCells","cell","newCell","cellPos","completeNewCell","assign","toWindowPos","positionList","targetPosition","positionInsideBorder","positionConflict","targetCell","some","position","borderLevel","winPos","realX","realY","isXLegal","isYLegal","pos","hintBox","getElementById","zhHint","enHint","popup","cellActions","link","detail","open","mail","location","href","vimeo","vimeoEvent","classList","remove","iframe","add","frameborder","src","onload","text","WorkCell","id","class","width","height","backgroundSize","backgroundPosition","onmouseenter","innerText","body","onmouseleave","onclick","updateCells","delayIndex","opacity","main","cloneState","JSON","parse","stringify","newCellsWithPos","JSONinfo","console","log"],"mappings":"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","file":"azuma-coding.58da0491.map","sourceRoot":"src","sourcesContent":["export function h(name, attributes) {\n  var rest = []\n  var children = []\n  var length = arguments.length\n\n  while (length-- > 2) rest.push(arguments[length])\n\n  while (rest.length) {\n    var node = rest.pop()\n    if (node && node.pop) {\n      for (length = node.length; length--; ) {\n        rest.push(node[length])\n      }\n    } else if (node != null && node !== true && node !== false) {\n      children.push(node)\n    }\n  }\n\n  return typeof name === \"function\"\n    ? name(attributes || {}, children)\n    : {\n        nodeName: name,\n        attributes: attributes || {},\n        children: children,\n        key: attributes && attributes.key\n      }\n}\n\nexport function app(state, actions, view, container) {\n  var map = [].map\n  var rootElement = (container && container.children[0]) || null\n  var oldNode = rootElement && recycleElement(rootElement)\n  var lifecycle = []\n  var skipRender\n  var isRecycling = true\n  var globalState = clone(state)\n  var wiredActions = wireStateToActions([], globalState, clone(actions))\n\n  scheduleRender()\n\n  return wiredActions\n\n  function recycleElement(element) {\n    return {\n      nodeName: element.nodeName.toLowerCase(),\n      attributes: {},\n      children: map.call(element.childNodes, function(element) {\n        return element.nodeType === 3 // Node.TEXT_NODE\n          ? element.nodeValue\n          : recycleElement(element)\n      })\n    }\n  }\n\n  function resolveNode(node) {\n    return typeof node === \"function\"\n      ? resolveNode(node(globalState, wiredActions))\n      : node != null\n        ? node\n        : \"\"\n  }\n\n  function render() {\n    skipRender = !skipRender\n\n    var node = resolveNode(view)\n\n    if (container && !skipRender) {\n      rootElement = patch(container, rootElement, oldNode, (oldNode = node))\n    }\n\n    isRecycling = false\n\n    while (lifecycle.length) lifecycle.pop()()\n  }\n\n  function scheduleRender() {\n    if (!skipRender) {\n      skipRender = true\n      setTimeout(render)\n    }\n  }\n\n  function clone(target, source) {\n    var out = {}\n\n    for (var i in target) out[i] = target[i]\n    for (var i in source) out[i] = source[i]\n\n    return out\n  }\n\n  function setPartialState(path, value, source) {\n    var target = {}\n    if (path.length) {\n      target[path[0]] =\n        path.length > 1\n          ? setPartialState(path.slice(1), value, source[path[0]])\n          : value\n      return clone(source, target)\n    }\n    return value\n  }\n\n  function getPartialState(path, source) {\n    var i = 0\n    while (i < path.length) {\n      source = source[path[i++]]\n    }\n    return source\n  }\n\n  function wireStateToActions(path, state, actions) {\n    for (var key in actions) {\n      typeof actions[key] === \"function\"\n        ? (function(key, action) {\n            actions[key] = function(data) {\n              var result = action(data)\n\n              if (typeof result === \"function\") {\n                result = result(getPartialState(path, globalState), actions)\n              }\n\n              if (\n                result &&\n                result !== (state = getPartialState(path, globalState)) &&\n                !result.then // !isPromise\n              ) {\n                scheduleRender(\n                  (globalState = setPartialState(\n                    path,\n                    clone(state, result),\n                    globalState\n                  ))\n                )\n              }\n\n              return result\n            }\n          })(key, actions[key])\n        : wireStateToActions(\n            path.concat(key),\n            (state[key] = clone(state[key])),\n            (actions[key] = clone(actions[key]))\n          )\n    }\n\n    return actions\n  }\n\n  function getKey(node) {\n    return node ? node.key : null\n  }\n\n  function eventListener(event) {\n    return event.currentTarget.events[event.type](event)\n  }\n\n  function updateAttribute(element, name, value, oldValue, isSvg) {\n    if (name === \"key\") {\n    } else if (name === \"style\") {\n      if (typeof value === \"string\") {\n        element.style.cssText = value\n      } else {\n        if (typeof oldValue === \"string\") oldValue = element.style.cssText = \"\"\n        for (var i in clone(oldValue, value)) {\n          var style = value == null || value[i] == null ? \"\" : value[i]\n          if (i[0] === \"-\") {\n            element.style.setProperty(i, style)\n          } else {\n            element.style[i] = style\n          }\n        }\n      }\n    } else {\n      if (name[0] === \"o\" && name[1] === \"n\") {\n        name = name.slice(2)\n\n        if (element.events) {\n          if (!oldValue) oldValue = element.events[name]\n        } else {\n          element.events = {}\n        }\n\n        element.events[name] = value\n\n        if (value) {\n          if (!oldValue) {\n            element.addEventListener(name, eventListener)\n          }\n        } else {\n          element.removeEventListener(name, eventListener)\n        }\n      } else if (\n        name in element &&\n        name !== \"list\" &&\n        name !== \"type\" &&\n        name !== \"draggable\" &&\n        name !== \"spellcheck\" &&\n        name !== \"translate\" &&\n        !isSvg\n      ) {\n        element[name] = value == null ? \"\" : value\n      } else if (value != null && value !== false) {\n        element.setAttribute(name, value)\n      }\n\n      if (value == null || value === false) {\n        element.removeAttribute(name)\n      }\n    }\n  }\n\n  function createElement(node, isSvg) {\n    var element =\n      typeof node === \"string\" || typeof node === \"number\"\n        ? document.createTextNode(node)\n        : (isSvg = isSvg || node.nodeName === \"svg\")\n          ? document.createElementNS(\n              \"http://www.w3.org/2000/svg\",\n              node.nodeName\n            )\n          : document.createElement(node.nodeName)\n\n    var attributes = node.attributes\n    if (attributes) {\n      if (attributes.oncreate) {\n        lifecycle.push(function() {\n          attributes.oncreate(element)\n        })\n      }\n\n      for (var i = 0; i < node.children.length; i++) {\n        element.appendChild(\n          createElement(\n            (node.children[i] = resolveNode(node.children[i])),\n            isSvg\n          )\n        )\n      }\n\n      for (var name in attributes) {\n        updateAttribute(element, name, attributes[name], null, isSvg)\n      }\n    }\n\n    return element\n  }\n\n  function updateElement(element, oldAttributes, attributes, isSvg) {\n    for (var name in clone(oldAttributes, attributes)) {\n      if (\n        attributes[name] !==\n        (name === \"value\" || name === \"checked\"\n          ? element[name]\n          : oldAttributes[name])\n      ) {\n        updateAttribute(\n          element,\n          name,\n          attributes[name],\n          oldAttributes[name],\n          isSvg\n        )\n      }\n    }\n\n    var cb = isRecycling ? attributes.oncreate : attributes.onupdate\n    if (cb) {\n      lifecycle.push(function() {\n        cb(element, oldAttributes)\n      })\n    }\n  }\n\n  function removeChildren(element, node) {\n    var attributes = node.attributes\n    if (attributes) {\n      for (var i = 0; i < node.children.length; i++) {\n        removeChildren(element.childNodes[i], node.children[i])\n      }\n\n      if (attributes.ondestroy) {\n        attributes.ondestroy(element)\n      }\n    }\n    return element\n  }\n\n  function removeElement(parent, element, node) {\n    function done() {\n      parent.removeChild(removeChildren(element, node))\n    }\n\n    var cb = node.attributes && node.attributes.onremove\n    if (cb) {\n      cb(element, done)\n    } else {\n      done()\n    }\n  }\n\n  function patch(parent, element, oldNode, node, isSvg) {\n    if (node === oldNode) {\n    } else if (oldNode == null || oldNode.nodeName !== node.nodeName) {\n      var newElement = createElement(node, isSvg)\n      parent.insertBefore(newElement, element)\n\n      if (oldNode != null) {\n        removeElement(parent, element, oldNode)\n      }\n\n      element = newElement\n    } else if (oldNode.nodeName == null) {\n      element.nodeValue = node\n    } else {\n      updateElement(\n        element,\n        oldNode.attributes,\n        node.attributes,\n        (isSvg = isSvg || node.nodeName === \"svg\")\n      )\n\n      var oldKeyed = {}\n      var newKeyed = {}\n      var oldElements = []\n      var oldChildren = oldNode.children\n      var children = node.children\n\n      for (var i = 0; i < oldChildren.length; i++) {\n        oldElements[i] = element.childNodes[i]\n\n        var oldKey = getKey(oldChildren[i])\n        if (oldKey != null) {\n          oldKeyed[oldKey] = [oldElements[i], oldChildren[i]]\n        }\n      }\n\n      var i = 0\n      var k = 0\n\n      while (k < children.length) {\n        var oldKey = getKey(oldChildren[i])\n        var newKey = getKey((children[k] = resolveNode(children[k])))\n\n        if (newKeyed[oldKey]) {\n          i++\n          continue\n        }\n\n        if (newKey != null && newKey === getKey(oldChildren[i + 1])) {\n          if (oldKey == null) {\n            removeElement(element, oldElements[i], oldChildren[i])\n          }\n          i++\n          continue\n        }\n\n        if (newKey == null || isRecycling) {\n          if (oldKey == null) {\n            patch(element, oldElements[i], oldChildren[i], children[k], isSvg)\n            k++\n          }\n          i++\n        } else {\n          var keyedNode = oldKeyed[newKey] || []\n\n          if (oldKey === newKey) {\n            patch(element, keyedNode[0], keyedNode[1], children[k], isSvg)\n            i++\n          } else if (keyedNode[0]) {\n            patch(\n              element,\n              element.insertBefore(keyedNode[0], oldElements[i]),\n              keyedNode[1],\n              children[k],\n              isSvg\n            )\n          } else {\n            patch(element, oldElements[i], null, children[k], isSvg)\n          }\n\n          newKeyed[newKey] = children[k]\n          k++\n        }\n      }\n\n      while (i < oldChildren.length) {\n        if (getKey(oldChildren[i]) == null) {\n          removeElement(element, oldElements[i], oldChildren[i])\n        }\n        i++\n      }\n\n      for (var i in oldKeyed) {\n        if (!newKeyed[i]) {\n          removeElement(element, oldKeyed[i][0], oldKeyed[i][1])\n        }\n      }\n    }\n    return element\n  }\n}\n","addEventListener('resize', updateAllTracked)\naddEventListener('scroll', updateAllTracked)\n\nvar trackingRegistry = []\n\nfunction removeElement (el) {\n    el.parentNode.removeChild(el)\n}\n\nfunction setStyle (el, attr) {\n    Object.keys(attr)\n    .forEach(function (name) {\n        el.style[name] = attr[name]\n    })\n}\n\nfunction registerTracking (el) {\n    if (trackingRegistry.indexOf(el) > -1 ) return\n    trackingRegistry.push(el)\n    setTimeout(function () {\n      updateTracking(el)\n    }, 0)\n}\n\nfunction unregisterTracking(el) {\n    var i = trackingRegistry.indexOf(el)\n    if (i === -1) return\n    trackingRegistry.splice(i, 1)\n}\n\nfunction updateAllTracked () {\n    trackingRegistry.forEach(updateTracking)  \n} \n\nfunction invertLastMove (el) {\n    var x = el._x\n    var y = el._y\n    if (!x) return 'translate(0, 0)'\n    var n = updateTracking(el)\n    var dx = Math.floor(x - n.x)\n    var dy = Math.floor(y - n.y)\n    return 'translate(' + dx + 'px, ' + dy + 'px)'\n}\n\nfunction updateTracking (el) {\n    var rect = el.getBoundingClientRect()\n    el._x = rect.left\n    el._y = rect.top\n    return {x: rect.left, y: rect.top}\n}\n\nfunction runTransition (el, attr, before, after, ondone) {\n    var easing = attr.easing || 'linear'\n    var time = attr.time || 300\n    var delay = attr.delay || 0\n    setStyle(el, before)\n    setTimeout(function () {\n        requestAnimationFrame(function () {\n            setStyle(el, after)\n            el.style.transition = 'all ' + easing + ' ' + time + 'ms'\n            setTimeout(function () {\n                el.style.transition = null\n                ondone && ondone()\n            }, time)\n        })\n    }, delay)\n}\n\nfunction runEnter (el, attr, css) {\n    if (typeof css === 'function') css = css()\n    runTransition(\n        el, attr,\n        css,\n        Object.keys(css).reduce(function (o, n) {\n            o[n] = null\n            return o\n        }, {}),\n        function () { updateTracking(el) }\n    )\n}\n\nfunction runMove (el, attr) {\n    runTransition(\n        el, attr,\n        {transform: invertLastMove(el)},\n        {transform: null}\n    )\n}\n\nfunction runExit (el, attr, css, done) {\n    if (typeof css === 'function') css = css()\n    unregisterTracking(el)\n    var translation = invertLastMove(el)\n    css.transform = translation + (css.transform ? (' ' + css.transform) : '')\n    runTransition(\n        el, attr,\n        {transform: translation},\n        css,\n        done\n    )\n}\n    \nfunction noop () {}\n    \nfunction composeHandlers (f1, f2) {\n    if (!f1) return f2\n    if (!f2) return f1\n    return function (el, done) {\n        f1 && f1(el, done)\n        f2 && f2(el, done)\n        return noop\n    }\n}\n\nfunction transitionComponent (handlersFn) {\n    return function (attr, children) {\n        var handlers = handlersFn(attr || {})\n        return children\n        .filter(function (child) { return !!child.attributes})\n        .map(function (child) {\n            ['oncreate', 'onupdate', 'onremove'].forEach(function (n) {\n                child.attributes[n] = composeHandlers(child.attributes[n], handlers[n])\n            })  \n            return child\n        })\n    }\n}\n\nvar _track = transitionComponent(function (attr) { \n    return {oncreate: function (el) { registerTracking(el)} }\n})\n\nvar _move = transitionComponent(function (attr) { \n    return { onupdate: function (el) { runMove(el, attr) } }\n})\n\nvar _exit = transitionComponent(function (attr) {\n    return {\n        onremove: function (el, done) {\n            done = done || function () { removeElement(el) }\n            runExit(el, attr, attr.css || {}, !attr.keep && done)\n        }\n    }\n})\n\nvar Enter = transitionComponent(function (attr) {\n    return { oncreate: function (el) { runEnter(el, attr, attr.css || {}) } }\n})\n\nvar Move = function (attr, children) {\n    return _move(attr, _track(null, children))\n}\n\nvar Exit = function (attr, children) {\n    return _exit(attr, _track(null, children))\n}\n\nexport {Enter, Move, Exit}  ",null,"const CellConfig = {\n  cellSize: 7,\n  viewHeight: Math.floor(window.innerHeight / 100),\n  aspect: Math.floor(window.innerWidth / window.innerHeight * 10) / 10\n}\n\nconst directions = {\n  odd: [\n    { x: 0, y: -1 },\n    { x: 1, y: 0 },\n    { x: 0, y: 1 },\n    { x: -1, y: 1 },\n    { x: -1, y: 0 },\n    { x: -1, y: -1 }\n  ],\n  even: [\n    { x: 1, y: -1 },\n    { x: 1, y: 0 },\n    { x: 1, y: 1 },\n    { x: 0, y: 1 },\n    { x: -1, y: 0 },\n    { x: 0, y: -1 }\n  ]\n}\n\nconst randomIn = (min, max) => (\n  Math.floor(\n    Math.random() * (max - min + 1)\n  ) + min\n)\n\nconst rangeIn = (min, max) => (\n  [...new Array(max - min + 1).keys()].map(i => (i + min))\n)\n\nconst calcNextPos = positionArray => {\n  if(positionArray.length === 0) { return { x: 0, y: 0 } }\n  let basePosition = positionArray[randomIn(0, positionArray.length - 1)]\n  let directionType = basePosition.y % 2 ? 'odd' : 'even'\n  let randomDirection = randomIn(0, 5)\n  let movement = directions[directionType][randomDirection]\n  return { x: basePosition.x + movement.x, y: basePosition.y + movement.y }\n}\n\nconst getNextPos = positionArray => {\n  let nextPos = calcNextPos(positionArray) // {x, y}\n  while (!verifyPos(positionArray, nextPos)) {\n    nextPos = calcNextPos(positionArray)\n  }\n  return nextPos\n}\n\nconst configurePosition = (currentCells, newCells) => {\n  let positionArray = currentCells.map(cell => ({ x: cell.x, y: cell.y  }))\n  return newCells.map(newCell => {\n    let cellPos = getNextPos(positionArray)\n    let completeNewCell = Object.assign({}, newCell, toWindowPos(cellPos))\n    positionArray = positionArray.concat(cellPos)\n    // {id, x, y}\n    return completeNewCell\n  })\n}\n\nconst verifyPos = (positionList, targetPosition) => (\n  positionInsideBorder(targetPosition) && !positionConflict(positionList, targetPosition)\n)\nconst positionConflict = (positionList, targetCell) => (\n  positionList.some(position => (\n    position.x === targetCell.x && position.y === targetCell.y\n  ))\n)\n\nconst positionInsideBorder = cell => {\n  let borderLevel = 45\n  let winPos = toWindowPos(cell)\n  let realX = winPos.x * CellConfig.cellSize * 3 / 4 * CellConfig.viewHeight\n  let realY = winPos.y * CellConfig.cellSize * 3 / 4 * CellConfig.viewHeight\n  let isXLegal = realX > Math.floor(-borderLevel * CellConfig.viewHeight * CellConfig.aspect) + 1 &&\n    realX < Math.floor(borderLevel * CellConfig.viewHeight * CellConfig.aspect) - 1\n  let isYLegal = realY > Math.floor(-borderLevel * CellConfig.viewHeight) &&\n    realY < Math.floor(borderLevel * CellConfig.viewHeight)\n  return isXLegal && isYLegal\n}\n\nconst toWindowPos = pos => (\n  pos.y % 2 ? { x: pos.x * 4 - 2, y: pos.y * 3 } : { x: pos.x * 4, y: pos.y * 3 }\n)\n\nexport { rangeIn, configurePosition, CellConfig }\n","import { h, app } from 'hyperapp'\nimport { Enter } from '@hyperapp/transitions'\nimport JSONinfo from './cellsInfo.json'\nimport { configurePosition, CellConfig } from './mylib'\nconst hintBox = document.getElementById('hint-box')\nconst zhHint = document.getElementById('zh-hint')\nconst enHint = document.getElementById('en-hint')\nconst popup = document.getElementById('popup')\n\n// cells.details: { id, title, logo, vimeoUrl }\n// cells.positionList: { id, x, y }\n// updateCells: update cells object and posList object\n// pos(position) format { x: additional pUnit, y: additional pUnit}\n\nconst cellActions = {\n  link: detail => {\n    window.open(detail.url, '_blank')\n  },\n  mail: detail => {\n    window.location.href = `mailto:${detail.addr}`\n  },\n  vimeo: detail => {\n    let vimeoEvent = () => {\n      popup.classList.remove('visible')\n      setTimeout(() => {\n        popup.classList.remove('exist')\n        iframe.remove()\n      }, 200)\n      popup.removeEventListener('click', vimeoEvent)\n    }\n    popup.addEventListener('click', vimeoEvent)\n    let iframe = document.createElement('iframe')\n    iframe.classList.add('vimeo-player')\n    iframe.frameborder = '0'\n    iframe.src = `https://player.vimeo.com/video/${detail.vimeoId}`\n    popup.appendChild(iframe)\n    popup.classList.add('exist')\n    iframe.onload = () => {\n      popup.classList.add('visible')\n    }\n  },\n  text: detail => {\n    //\n  }\n}\nconst WorkCell = ({ x, y, id, title, enTitle, type, typeDetail, imgIndex }) => (\n  h('div', {\n    class: 'hexagon',\n    style: {\n      width: `${(CellConfig.cellSize - 0.8) * 3}vmin`,\n      height: `${(CellConfig.cellSize - 0.8) * 3}vmin`,\n      left: `calc(50vw + ${x * CellConfig.cellSize * 0.75}vmin)`,\n      top: `calc(50vh + ${y * CellConfig.cellSize * 0.75}vmin)`,\n      backgroundSize: `${(CellConfig.cellSize - 0.8) * 3}vmin`,\n      backgroundPosition: `0 -${imgIndex * (CellConfig.cellSize - 0.8) * 3}vmin`\n    },\n    onmouseenter: () => {\n      zhHint.innerText = title\n      enHint.innerText = enTitle\n      hintBox.classList.add('active')\n      document.title = `AzumaCoding作品 - ${title}`\n      document.body.style.backgroundPosition = `center -${100 * imgIndex}vh`\n    },\n    onmouseleave: () => {\n      hintBox.classList.remove('active')\n      document.body.removeAttribute('style')\n      document.title = 'AzumaCoding作品集'\n    },\n    onclick: () => {\n      zhHint.innerText = '請稍等...'\n      cellActions[type](typeDetail)\n    }\n  })\n)\n\nconst state = {\n  cells: []\n}\n\nconst actions = {\n  updateCells: cells => state => (\n    cells\n  )\n}\n\nlet delayIndex = 0\nconst view = (state, actions) => (\n  h(\n    'div', { id: 'app-container' },\n    state.cells.map(cell => (\n      Enter({ css: { opacity: '0' }, delay: 100 + delayIndex++ * 280, time: 300 }, [WorkCell(cell)])\n    ))\n  )\n)\n\nconst main = app(state, actions, view, document.body)\n\nlet cloneState = JSON.parse(JSON.stringify(state))\nlet newCellsWithPos = configurePosition(state.cells, JSONinfo.cells)\ncloneState.cells.push(...newCellsWithPos)\nconsole.log(cloneState)\nmain.updateCells(cloneState)\n"]}